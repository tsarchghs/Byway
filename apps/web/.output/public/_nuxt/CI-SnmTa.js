import{l as n,r as a}from"./DQDUwbr-.js";const t=a(null),o=a(null);function g(){const l=n(()=>!!o.value),u=n(()=>{const e=t.value?.roles;return Array.isArray(e)?e.map(s=>String(s)):[]}),r=n(()=>u.value.some(e=>e.toLowerCase().includes("student"))),i=n(()=>u.value.some(e=>e.toLowerCase().includes("teacher"))),c=n(()=>u.value.some(e=>e.toLowerCase().includes("admin")||e.toLowerCase().includes("institution_admin")||e.toLowerCase().includes("institution-admin")));function m(e){t.value=e.user,o.value=e.token,localStorage.setItem("token",o.value),localStorage.setItem("user",JSON.stringify(t.value))}function v(){t.value=null,o.value=null,localStorage.removeItem("token"),localStorage.removeItem("user")}if(typeof window<"u"){const e=localStorage.getItem("token"),s=localStorage.getItem("user");if(e&&s){o.value=e;try{t.value=JSON.parse(s)}catch{t.value=null}}}return{user:t,me:t,token:o,isLoggedIn:l,login:m,logout:v,isStudent:r,isTeacher:i,isInstitutionAdmin:c}}export{g as u};
