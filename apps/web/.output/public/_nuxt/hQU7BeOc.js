import{d as Z}from"./BSyZAlzx.js";import{t as Ae}from"./DFP984fK.js";import{g as Ge,r,l as b,ad as je,q as g,w as a,p as n,o as i,b as t,L as ee,a as o,K as S,x as te,b5 as ze,d as u,bj as Oe,t as c,m as h,c as K,I as ae,J as le,_ as Ue}from"./DQDUwbr-.js";const Be={class:"global-banners px-4 pt-3"},Fe={class:"sider-inner p-3"},Le={class:"flex justify-between items-center"},Me={class:"font-semibold"},Ee={class:"grid md:grid-cols-3 gap-4"},Ke={class:"kpi-value text-green-600"},Re={class:"kpi-value text-blue-600"},$e={class:"kpi-value text-orange-500"},Pe={class:"grid md:grid-cols-2 gap-6"},Je={class:"flex justify-between items-center"},Te={class:"flex justify-between items-center"},Ve={class:"text-muted text-xs"},qe={class:"right-inner p-3"},Ye=Ge({__name:"[id]",setup(He){Ae.defaultAlgorithm;const se=require("dayjs/plugin/relativeTime");Z.extend(se);const D=r(!1),A=r(!0),G=r(!0),R=r("Gradebook prototype"),C=r(""),I=r("all"),j=r(!1),$=r(!1),P=r("notes"),z=r(!1),O=r([{id:"1",assignmentId:"a1",assignmentName:"Midterm",courseId:"c1",courseName:"CS 101",grade:88,feedback:"Strong understanding",status:"graded",updatedAt:new Date},{id:"2",assignmentId:"a2",assignmentName:"Project 1",courseId:"c1",courseName:"CS 101",grade:92,feedback:"Excellent code",status:"graded",updatedAt:new Date(Date.now()-864e5)},{id:"3",assignmentId:"a3",assignmentName:"Assignment 3",courseId:"c1",courseName:"CS 101",grade:null,feedback:null,status:"pending",updatedAt:new Date},{id:"4",assignmentId:"a4",assignmentName:"Final Project",courseId:"c2",courseName:"Math 201",grade:95,feedback:"Outstanding",status:"graded",updatedAt:new Date(Date.now()-2e8)}]),J=r("grades"),ne=r(!1),T=b(()=>{const l={};return O.value.forEach(e=>{l[e.courseId]||(l[e.courseId]={courseId:e.courseId,courseName:e.courseName,grades:[]}),l[e.courseId].grades.push(e.grade)}),Object.values(l).map(e=>{const m=e.grades.filter(v=>v!=null),d=m.length?Math.round(m.reduce((v,N)=>v+N,0)/m.length):0;return{...e,gradedCount:m.length,totalCount:e.grades.length,avg:d}})}),_=r(null),oe=b(()=>T.value.find(l=>l.courseId===_.value));je(_,l=>{x.value[l]||(x.value[l]={text:""})});const f=b(()=>{let l=O.value;return _.value&&(l=l.filter(e=>e.courseId===_.value)),C.value&&(l=l.filter(e=>e.assignmentName.toLowerCase().includes(C.value.toLowerCase()))),I.value!=="all"&&(l=l.filter(e=>e.status===I.value)),l.map(e=>({...e,key:e.id}))}),k=b(()=>{const l=f.value;if(!l.length)return{average:null,completed:0,total:0,pending:0};const e=l.filter(d=>d.grade!=null);return{average:e.length?Math.round(e.reduce((d,v)=>d+v.grade,0)/e.length):null,completed:e.length,total:l.length,pending:l.filter(d=>d.status!=="graded").length}}),de=b(()=>{const l={"A (90+)":0,"B (80-89)":0,"C (70-79)":0,"D (60-69)":0,"F (<60)":0};return f.value.forEach(e=>{e.grade!=null&&(e.grade>=90?l["A (90+)"]++:e.grade>=80?l["B (80-89)"]++:e.grade>=70?l["C (70-79)"]++:e.grade>=60?l["D (60-69)"]++:l["F (<60)"]++)}),l}),U=b(()=>f.value.filter(l=>l.feedback||l.status==="graded")),re=b(()=>U.value.map(l=>({assignment:l.assignmentName,text:l.feedback||"Updated"}))),x=r({c1:{text:""},c2:{text:""}});function ue(){localStorage.setItem("gb-notes",JSON.stringify(x.value))}const B=r([]);function ie(l){B.value.splice(l,1)}function ce(l){_.value=l}function me(l){return Z(l).fromNow()}function V(l){return{graded:"green",pending:"orange",submitted:"blue"}[l]||"default"}function pe(){D.value=!D.value}function ge(){const l=JSON.stringify(O.value,null,2),e=new Blob([l],{type:"application/json"}),m=URL.createObjectURL(e),d=document.createElement("a");d.href=m,d.download="gradebook.json",d.click()}const _e=[{title:"Assignment",dataIndex:"assignmentName"},{title:"Course",dataIndex:"courseName"},{title:"Grade",dataIndex:"grade",customRender:({record:l})=>l.grade==null?h("span",{class:"text-muted"},"—"):h("b",`${l.grade}%`)},{title:"Status",dataIndex:"status",customRender:({record:l})=>h("a-tag",{color:V(l.status)},l.status)}];return(l,e)=>{const m=n("a-alert"),d=n("a-tag"),v=n("a-badge"),N=n("a-space"),F=n("a-button"),ve=n("a-tooltip"),fe=n("a-page-header"),be=n("a-input-search"),ke=n("a-segmented"),p=n("a-card"),ye=n("a-divider"),L=n("a-list-item-meta"),M=n("a-list-item"),E=n("a-list"),q=n("a-layout-sider"),Y=n("a-breadcrumb-item"),xe=n("a-breadcrumb"),we=n("a-table"),y=n("a-tab-pane"),H=n("a-progress"),Q=n("a-empty"),W=n("a-tabs"),Ce=n("a-layout-content"),Ie=n("a-textarea"),Ne=n("a-form-item"),Se=n("a-form"),X=n("a-layout"),he=n("a-modal"),De=n("a-config-provider");return i(),g(De,null,{default:a(()=>[t(X,{class:ee(["gradebook-root",D.value?"is-dark":""])},{default:a(()=>[o("div",Be,[A.value?S("",!0):(i(),g(m,{key:0,type:"warning",banner:"","show-icon":"",message:"You're offline. Mock/local mode active.",class:"mb-2"})),G.value?(i(),g(m,{key:1,type:"info",banner:"","show-icon":"",message:`Mock data active${R.value?` · ${R.value}`:""}`},null,8,["message"])):S("",!0)]),t(fe,{class:"page-header shadow-sm px-6 py-4 bg-white",title:"My Gradebook","sub-title":"Grades · Analytics · Feedback"},{tags:a(()=>[t(N,null,{default:a(()=>[t(d,{color:"blue"},{default:a(()=>[...e[9]||(e[9]=[u("Student",-1)])]),_:1}),t(d,{color:"gold"},{default:a(()=>[...e[10]||(e[10]=[u("Performance",-1)])]),_:1}),t(v,{status:A.value?"processing":"default",text:A.value?"Online":"Offline"},null,8,["status","text"]),t(v,{status:G.value?"warning":"success",text:G.value?"Mock":"Live"},null,8,["status","text"])]),_:1})]),extra:a(()=>[t(N,null,{default:a(()=>[t(ve,{title:"Toggle dark mode"},{default:a(()=>[t(F,{shape:"circle",onClick:pe},{default:a(()=>[t(te(ze))]),_:1})]),_:1}),t(F,{type:"primary",onClick:e[0]||(e[0]=s=>z.value=!0)},{default:a(()=>[t(te(Oe)),e[11]||(e[11]=u(" Export ",-1))]),_:1})]),_:1})]),_:1}),t(X,{class:"main-layout"},{default:a(()=>[t(q,{width:"300",collapsible:"",collapsed:j.value,"onUpdate:collapsed":e[3]||(e[3]=s=>j.value=s),"collapsed-width":64,breakpoint:"lg",class:"left-sider border-r"},{default:a(()=>[o("div",Fe,[t(be,{value:C.value,"onUpdate:value":e[1]||(e[1]=s=>C.value=s),"allow-clear":"",placeholder:"Search courses...",class:"mb-3"},null,8,["value"]),j.value?S("",!0):(i(),g(p,{key:0,size:"small",bordered:!1,title:"Filters",class:"mb-3"},{default:a(()=>[t(ke,{value:I.value,"onUpdate:value":e[2]||(e[2]=s=>I.value=s),options:[{label:"All",value:"all"},{label:"Graded",value:"graded"},{label:"Pending",value:"pending"},{label:"Submitted",value:"submitted"}]},null,8,["value"])]),_:1})),t(ye),t(E,{size:"small","data-source":T.value,"row-key":s=>s.courseId,class:"course-list"},{renderItem:a(({item:s})=>[t(M,{class:ee(["course-item",_.value===s.courseId?"active":""]),onClick:w=>ce(s.courseId)},{default:a(()=>[t(L,{title:s.courseName,description:`${s.gradedCount} graded • avg ${s.avg}%`},null,8,["title","description"])]),_:2},1032,["class","onClick"])]),_:1},8,["data-source","row-key"])])]),_:1},8,["collapsed"]),t(Ce,{class:"center-content px-6 py-6"},{default:a(()=>[t(xe,{class:"mb-4"},{default:a(()=>[t(Y,null,{default:a(()=>[...e[12]||(e[12]=[u("Students",-1)])]),_:1}),t(Y,null,{default:a(()=>[...e[13]||(e[13]=[u("Gradebook",-1)])]),_:1})]),_:1}),t(p,{loading:ne.value,class:"mb-5",bordered:""},{title:a(()=>[o("div",Le,[o("span",Me,c(oe.value?.courseName||"Your Grades"),1),t(d,{color:"blue"},{default:a(()=>[u(c(f.value.length)+" records",1)]),_:1})])]),default:a(()=>[o("div",Ee,[t(p,{size:"small",class:"kpi-card"},{title:a(()=>[...e[14]||(e[14]=[u("Average Grade",-1)])]),default:a(()=>[o("div",Ke,c(k.value.average??"—")+"% ",1)]),_:1}),t(p,{size:"small",class:"kpi-card"},{title:a(()=>[...e[15]||(e[15]=[u("Completed",-1)])]),default:a(()=>[o("div",Re,c(k.value.completed)+"/"+c(k.value.total),1)]),_:1}),t(p,{size:"small",class:"kpi-card"},{title:a(()=>[...e[16]||(e[16]=[u("Pending",-1)])]),default:a(()=>[o("div",$e,c(k.value.pending),1)]),_:1})])]),_:1},8,["loading"]),t(p,null,{default:a(()=>[t(W,{activeKey:J.value,"onUpdate:activeKey":e[4]||(e[4]=s=>J.value=s),animated:""},{default:a(()=>[t(y,{key:"grades",tab:"Grades"},{default:a(()=>[f.value.length===0?(i(),g(m,{key:0,type:"info",message:"No grades available.",class:"mb-4"})):(i(),g(we,{key:1,columns:_e,"data-source":f.value,"row-key":"id",bordered:"",pagination:{pageSize:8}},null,8,["data-source"]))]),_:1}),t(y,{key:"analytics",tab:"Analytics"},{default:a(()=>[o("div",Pe,[t(p,{size:"small",title:"Distribution"},{default:a(()=>[(i(!0),K(ae,null,le(de.value,(s,w)=>(i(),K("div",{key:w,class:"py-2"},[o("div",Je,[o("span",null,c(w),1),t(H,{percent:s/f.value.length*100,format:()=>s},null,8,["percent","format"])])]))),128))]),_:1}),t(p,{size:"small",title:"Performance Trend"},{default:a(()=>[o("p",null,[e[17]||(e[17]=u("Current average: ",-1)),o("b",null,c(k.value.average)+"%",1)]),e[18]||(e[18]=o("p",null,[u("Last semester: "),o("b",null,"82%")],-1)),t(H,{percent:k.value.average},null,8,["percent"])]),_:1})])]),_:1}),t(y,{key:"feedback",tab:"Feedback"},{default:a(()=>[U.value.length===0?(i(),g(Q,{key:0})):S("",!0),(i(!0),K(ae,null,le(U.value,s=>(i(),g(p,{key:s.id,class:"mb-3"},{title:a(()=>[o("div",Te,[o("span",null,c(s.assignmentName),1),t(d,{color:V(s.status)},{default:a(()=>[u(c(s.status),1)]),_:2},1032,["color"])])]),default:a(()=>[o("p",null,[e[19]||(e[19]=o("b",null,"Grade:",-1)),u(" "+c(s.grade??"—"),1)]),o("p",null,[e[20]||(e[20]=o("b",null,"Feedback:",-1)),u(" "+c(s.feedback||"—"),1)]),o("div",Ve," Updated: "+c(me(s.updatedAt)),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1}),t(q,{width:"340",collapsible:"",collapsed:$.value,"onUpdate:collapsed":e[7]||(e[7]=s=>$.value=s),"collapsed-width":64,class:"right-sider border-l"},{default:a(()=>[o("div",qe,[t(W,{activeKey:P.value,"onUpdate:activeKey":e[6]||(e[6]=s=>P.value=s),size:"small"},{default:a(()=>[t(y,{key:"notes",tab:"Notes"},{default:a(()=>[t(p,{size:"small"},{default:a(()=>[t(Se,{layout:"vertical"},{default:a(()=>[t(Ne,{label:"Course notes"},{default:a(()=>[t(Ie,{value:x.value[_.value].text,"onUpdate:value":e[5]||(e[5]=s=>x.value[_.value].text=s),rows:6,onChange:ue},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),t(y,{key:"feed",tab:"Recent"},{default:a(()=>[t(E,{"data-source":re.value,size:"small"},{renderItem:a(({item:s})=>[t(M,null,{default:a(()=>[t(L,{title:s.assignment,description:s.text},null,8,["title","description"])]),_:2},1024)]),_:1},8,["data-source"])]),_:1}),t(y,{key:"bookmarks",tab:"Bookmarks"},{default:a(()=>[B.value.length?(i(),g(E,{key:1,"data-source":B.value},{renderItem:a(({item:s,index:w})=>[t(M,{actions:[h("a",{onClick:()=>ie(w)},"Remove")]},{default:a(()=>[t(L,{title:s.label},null,8,["title"])]),_:2},1032,["actions"])]),_:1},8,["data-source"])):(i(),g(Q,{key:0}))]),_:1})]),_:1},8,["activeKey"])])]),_:1},8,["collapsed"])]),_:1}),t(he,{open:z.value,"onUpdate:open":e[8]||(e[8]=s=>z.value=s),title:"Export Grades",footer:null},{default:a(()=>[e[22]||(e[22]=o("p",null,"Download your gradebook as JSON.",-1)),t(F,{type:"primary",block:"",onClick:ge},{default:a(()=>[...e[21]||(e[21]=[u("Download JSON",-1)])]),_:1})]),_:1},8,["open"])]),_:1},8,["class"])]),_:1})}}}),Ze=Ue(Ye,[["__scopeId","data-v-67dbdf1b"]]);export{Ze as default};
