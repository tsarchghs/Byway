import{g as y,r as v,j as x,W as h,k as U,q as b,w as s,p as n,o as w,b as e,a as $,d as k,m as C}from"./DQDUwbr-.js";const q={class:"mb-4 flex gap-2"},I=y({__name:"index",setup(N){const r=v([]),u=[{title:"Name",dataIndex:"name",key:"name"},{title:"Domain",dataIndex:"domain",key:"domain"},{title:"Actions",key:"act",customRender:({record:l})=>C("a",{href:`/institutions/${l.name.toLowerCase().replace(/\s+/g,"-")}/admin`},"Open")}],a=x({name:"",domain:"",logoUrl:""}),d=h().public?.apiBase||"http://localhost:4000";async function m(){const l=await $fetch(`${d}/api/authentication/graphql`,{method:"POST",body:{query:"query{ institutions{ id name domain logoUrl } }"}});r.value=l.data?.institutions??[]}async function c(){a.name&&(await $fetch(`${d}/api/authentication/graphql`,{method:"POST",body:{query:"mutation($name:String!,$domain:String,$logoUrl:String){ createInstitution(name:$name,domain:$domain,logoUrl:$logoUrl){ id } }",variables:a}}),await m(),a.name="",a.domain="",a.logoUrl="")}return U(m),(l,t)=>{const i=n("a-input"),p=n("a-button"),f=n("a-table"),g=n("a-card"),_=n("a-layout");return w(),b(_,{class:"p-6"},{default:s(()=>[e(g,{title:"Institutions",bordered:!1},{default:s(()=>[$("div",q,[e(i,{value:a.name,"onUpdate:value":t[0]||(t[0]=o=>a.name=o),placeholder:"Name",style:{"max-width":"240px"}},null,8,["value"]),e(i,{value:a.domain,"onUpdate:value":t[1]||(t[1]=o=>a.domain=o),placeholder:"Domain (optional)",style:{"max-width":"240px"}},null,8,["value"]),e(i,{value:a.logoUrl,"onUpdate:value":t[2]||(t[2]=o=>a.logoUrl=o),placeholder:"Logo URL (optional)",style:{"max-width":"240px"}},null,8,["value"]),e(p,{type:"primary",onClick:c},{default:s(()=>[...t[3]||(t[3]=[k("Create",-1)])]),_:1})]),e(f,{"data-source":r.value,columns:u,"row-key":"id"},null,8,["data-source"])]),_:1})]),_:1})}}});export{I as default};
