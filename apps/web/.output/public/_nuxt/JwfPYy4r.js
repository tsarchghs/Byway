import{g as tl,l as S,aj as ll,r as g,j as He,k as ol,av as nl,ad as al,br as sl,q as R,w as l,n as V,p as i,o as v,b as t,c,K as O,d as a,x as d,bw as Ge,a as D,t as m,bx as ul,by as ke,bz as il,bq as dl,bA as rl,S as pl,aa as vl,G as re,au as Ye,P as be,ah as Xe,bB as fl,bo as cl,I as z,J,bC as ml,as as pe,bD as et,bE as tt,bF as gl,_ as yl}from"./DQDUwbr-.js";const _l={style:{"min-width":"260px"}},kl={key:0,class:"restore"},bl={class:"totals"},Cl={class:"muted"},wl={key:0},Ul={class:"row-right"},Ol={class:"row-right"},ql={key:0,class:"lesson-warn"},zl={key:0},Al={key:0},xl={class:"video-box"},hl={key:1},Sl={key:2},Dl={style:{"padding-left":"20px",margin:"0"}},Tl={key:3},$l=["href"],Ml="Theresa Webb",Ll=tl({__name:"create",setup(Nl){const lt=gql`
  query Me {
    me { id email roles displayName }
  }
`,{loading:Rl,error:Pl,data:ot,refetch:El}=useQuery(lt);S(()=>ot?.me||null);const Ce=ll(),nt=Ce.params.teacher_id||"unknown",we=Ce.query.course_id||"draft",at=g("Advanced Vue 3 Workshop"),st={avatar:"/instructors/theresa.jpg"},s=He({title:"",description:"",objectives:[],isPublic:!0,unlockAt:null,slug:"",lessons:[]}),T=g([]),Ue=g(!1),C=g(null),W=g(!1),ve=g("video:intro"),K=g(!1),te=g(""),Oe=g(!1),Z=g(!1),le=g(""),oe=g(!1),qe=g(""),F=g(!1),ne=g(!1),U=He({defaultDuration:5,warnMissingTitle:!0,warnZeroDuration:!0}),ut=[{label:"Understand reactivity",value:"Understand reactivity"},{label:"Use Composition API",value:"Use Composition API"},{label:"Build reusable components",value:"Build reusable components"}],H=()=>Math.random().toString(36).slice(2),ze=o=>{if(!o)return 0;const e=(o.trim().match(/\S+/g)||[]).length;return Math.max(1,Math.ceil(e/200))},Ae=S(()=>s.lessons.reduce((o,e)=>o+(Number(e.duration)||0),0)),it=S(()=>s.lessons.filter(o=>o.type==="quiz").length),dt=S(()=>s.lessons.filter(o=>o.type==="assignment").length),G=S(()=>{let o=0;if(s.title&&(o+=30),s.description&&(o+=20),s.lessons.length){const e=s.lessons.filter(r=>r.title&&r.duration>0).length;o+=Math.min(50,Math.round(e/Math.max(1,s.lessons.length)*50))}return Math.min(100,o)}),rt=S(()=>G.value>=90?"Ready to publish":G.value>=60?"Looking good — a few gaps remain":"Work in progress"),pt=(o,e)=>`#${e+1} · ${o.type} · ${o.title||"Untitled"} · ${o.duration||0} min`,vt=o=>s.lessons.map((e,r)=>({label:`#${r+1} ${e.title||"Untitled"}`,value:e.id})).filter((e,r)=>r<o),ft=o=>(o||"").trim()||"#",P=g(!0),xe=g(""),he=g(1),ae=()=>{JSON.stringify(s),console.debug("setItem replaced"),xe.value=new Date().toLocaleString(),he.value+=1,V.success("Draft saved locally")},ct=()=>ae(),mt=()=>{P.value=!P.value,V.info(`Autosave ${P.value?"enabled":"disabled"}`)};ol(()=>{try{fe(),Qe()}catch{}window.addEventListener("keydown",Re)}),nl(()=>{window.removeEventListener("keydown",Re)});let Se=null;al(s,()=>{P.value&&(clearTimeout(Se),Se=setTimeout(()=>{ae(),b()},600))},{deep:!0});const A=g([]),x=g(-1),De=S(()=>x.value>0),Te=S(()=>x.value<A.value.length-1),$e=()=>JSON.stringify(s),Me=o=>Object.assign(s,JSON.parse(o)),b=()=>{const o=$e();A.value[x.value]!==o&&(A.value=A.value.slice(0,x.value+1),A.value.push(o),x.value=A.value.length-1)},Le=()=>{De.value&&(x.value-=1,Me(A.value[x.value]))},Ne=()=>{Te.value&&(x.value+=1,Me(A.value[x.value]))};sl(()=>b());const gt=()=>{le.value="",Z.value=!0},yt=()=>{try{const o=JSON.parse(le.value||"{}");Object.assign(s,o),Z.value=!1,ce(),b(),V.success("Imported module JSON")}catch(o){V.error(`Invalid JSON: ${o?.message||o}`)}},_t=()=>{qe.value=$e(),oe.value=!0},kt=()=>F.value=!0,bt=()=>ne.value=!0;function Re(o){const e=o.metaKey||o.ctrlKey,r=o.shiftKey;e&&o.key.toLowerCase()==="s"&&(o.preventDefault(),ae()),e&&o.key==="Enter"&&(o.preventDefault(),E()),e&&!r&&o.key.toLowerCase()==="z"&&(o.preventDefault(),Le()),e&&r&&o.key.toLowerCase()==="z"&&(o.preventDefault(),Ne()),e&&o.key==="."&&(o.preventDefault(),ce()),e&&o.key===","&&(o.preventDefault(),Je())}const E=o=>{const e={id:H(),title:"",type:"video",duration:U.defaultDuration,content:"",videoUrl:"",rubric:"",resources:[],attachments:[],tags:[],prerequisites:[],unlockAt:null,quiz:{questions:[]}},r=Object.assign(e,o||{});s.lessons.push(r),T.value=[...new Set([...T.value,r.id])],b()},Ct=o=>{const e=JSON.parse(JSON.stringify(s.lessons[o]));e.id=H(),e.title=e.title?`${e.title} (copy)`:"Untitled (copy)",s.lessons.splice(o+1,0,e),T.value=[...new Set([...T.value,e.id])],b()},wt=o=>{s.lessons.splice(o,1),b()},Pe=(o,e)=>{const r=o+e;if(r<0||r>=s.lessons.length)return;const[_]=s.lessons.splice(o,1);s.lessons.splice(r,0,_),b()},Ee=()=>E({type:"quiz",title:"Checkpoint quiz",duration:8,quiz:{questions:Array.from({length:5}).map((o,e)=>({id:H(),text:`Question ${e+1}`,type:"mcq",options:[{text:"A",correct:!0},{text:"B",correct:!1}]}))}}),Be=()=>E({type:"assignment",title:"Mini assignment",duration:20,content:"Build a small feature using today’s concept.",rubric:"✅ Completeness, ✅ Correctness, ✅ Clarity"}),fe=()=>E({type:"video",title:"Module intro & goals",duration:6,content:"What we will build, key concepts, how to succeed."}),Qe=()=>E({type:"reading",title:"Core concepts",duration:10,content:"Definitions, examples, pitfalls, and quick checks."}),Ut=o=>{s.lessons[o].quiz?.questions.push({id:H(),text:"",type:"mcq",options:[{text:"",correct:!1}]}),b()},Ot=(o,e)=>{s.lessons[o].quiz?.questions.splice(e,1),b()},Ve=(o,e,r)=>{const _=s.lessons[o].quiz?.questions||[],$=e+r;if($<0||$>=_.length)return;const[w]=_.splice(e,1);_.splice($,0,w),b()},qt=(o,e)=>{s.lessons[o].quiz?.questions[e].options.push({text:"",correct:!1}),b()},zt=(o,e,r)=>{s.lessons[o].quiz?.questions[e].options.splice(r,1),b()},At=o=>{const e=s.lessons[o].quiz?.questions||[];for(let r=0;r<5;r++)e.push({id:H(),text:`Auto-seeded MCQ ${e.length+1}`,type:"mcq",options:[{text:"Option A",correct:!0},{text:"Option B",correct:!1},{text:"Option C",correct:!1}]});s.lessons[o].quiz.questions=e,b()},xt=o=>{s.lessons[o].resources.push({title:"",url:""}),b()},ht=(o,e)=>{s.lessons[o].resources.splice(e,1),b()},ce=()=>T.value=s.lessons.map(o=>o.id),Je=()=>T.value=[],St=()=>W.value=!0,Dt=()=>{const[o,e]=ve.value.split(":");o==="video"&&e==="intro"&&fe(),o==="reading"&&e==="notes"&&Qe(),o==="quiz"&&e==="checkpoint"&&Ee(),o==="assignment"&&e==="mini"&&Be(),W.value=!1},Tt=()=>{K.value=!0,te.value=""},$t=()=>{const o=te.value.split(`
`).map(e=>e.trim()).filter(Boolean);for(const e of o){const[r,_,$]=e.split("|").map(p=>(p||"").trim()),w=r?.toLowerCase()||"video",se=Number($)||U.defaultDuration;E({type:w,title:_||"Untitled",duration:se})}K.value=!1,V.success(`Added ${o.length} lessons`)},Mt=()=>{if(!s.title)return V.error("Please add a module title");console.log("Saving module payload",{teacherId:nt,courseId:we,moduleData:s}),V.success(`Module "${s.title}" saved`),b()},Lt=()=>A.back(),Nt=o=>o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),Rt=()=>{!s.slug&&s.title&&(s.slug=Nt(s.title))},je=S(()=>{const o=[];return s.title||o.push("Module is missing a title."),s.lessons.length||o.push("No lessons — add at least one."),s.lessons.some(e=>!e.title)&&U.warnMissingTitle&&o.push("Some lessons are missing a title."),s.lessons.some(e=>!e.duration)&&U.warnZeroDuration&&o.push("Some lessons have zero duration."),o}),Pt=S(()=>je.value.length>0),Ie=o=>{const e=s.lessons[o],r=[];return!e.title&&U.warnMissingTitle&&r.push("Missing lesson title"),!e.duration&&U.warnZeroDuration&&r.push("Duration is zero"),e.type==="video"&&!e.videoUrl&&r.push("Video URL is empty"),e.type==="quiz"&&!e.quiz?.questions?.length&&r.push("Quiz has no questions"),r};return(o,e)=>{const r=i("a-avatar"),_=i("a-tag"),$=i("a-typography-title"),w=i("a-descriptions-item"),se=i("a-descriptions"),p=i("a-button"),h=i("a-space"),Et=i("a-badge"),Bt=i("a-popover"),ue=i("a-menu-item"),Qt=i("a-menu-divider"),Vt=i("keyboard-outlined"),Jt=i("a-menu"),jt=i("a-dropdown"),It=i("a-page-header"),j=i("a-alert"),M=i("a-typography-text"),Wt=i("a-progress"),I=i("a-col"),me=i("a-row"),ge=i("a-card"),L=i("a-input"),f=i("a-form-item"),N=i("a-textarea"),Y=i("a-select"),ye=i("a-switch"),We=i("a-date-picker"),X=i("a-divider"),Ke=i("a-tooltip"),B=i("a-select-option"),Kt=i("a-empty"),Zt=i("a-checkbox"),ee=i("a-form"),Ze=i("a-input-number"),Ft=i("a-upload"),Ht=i("a-popconfirm"),Gt=i("a-collapse-panel"),Yt=i("a-collapse"),_e=i("a-typography-paragraph"),Q=i("a-modal"),ie=i("a-radio"),Xt=i("a-radio-group"),el=i("a-layout");return v(),R(el,{class:"module-create-layout"},{default:l(()=>[t(It,{title:"Create New Module","sub-title":at.value,class:"page-header",onBack:Lt},{avatar:l(()=>[t(r,{src:st.avatar},null,8,["src"])]),tags:l(()=>[t(_,{color:"blue"},{default:l(()=>[a("Teacher: "+m(Ml))]),_:1}),t(_,{color:"green"},{default:l(()=>[a("Course: "+m(d(we)),1)]),_:1}),t(_,{color:s.isPublic?"cyan":"gold"},{default:l(()=>[a(m(s.isPublic?"Public":"Private"),1)]),_:1},8,["color"])]),extra:l(()=>[t(h,{size:8,wrap:""},{default:l(()=>[t(Bt,{placement:"bottomRight"},{content:l(()=>[D("div",_l,[t($,{level:5,style:{"margin-top":"0"}},{default:l(()=>[...e[29]||(e[29]=[a("Draft",-1)])]),_:1}),t(se,{size:"small",column:1,bordered:""},{default:l(()=>[t(w,{label:"Autosave"},{default:l(()=>[a(m(P.value?"On":"Off"),1)]),_:1}),t(w,{label:"Last saved"},{default:l(()=>[a(m(xe.value||"—"),1)]),_:1}),t(w,{label:"Version"},{default:l(()=>[a(m(he.value),1)]),_:1})]),_:1}),t(h,{style:{"margin-top":"8px"}},{default:l(()=>[t(p,{size:"small",onClick:mt},{default:l(()=>[a(m(P.value?"Disable autosave":"Enable autosave"),1)]),_:1}),t(p,{size:"small",onClick:ct},{default:l(()=>[...e[30]||(e[30]=[a(" Save now ",-1)])]),_:1})]),_:1})])]),default:l(()=>[t(Et,{status:P.value?"processing":"default"},{default:l(()=>[t(p,null,{default:l(()=>[t(d(Ge)),e[31]||(e[31]=a(" Draft",-1))]),_:1})]),_:1},8,["status"])]),_:1}),t(p,{onClick:St},{default:l(()=>[t(d(ul)),e[32]||(e[32]=a(" Templates",-1))]),_:1}),t(p,{onClick:Tt},{default:l(()=>[t(d(ke)),e[33]||(e[33]=a(" Bulk add",-1))]),_:1}),t(jt,null,{overlay:l(()=>[t(Jt,null,{default:l(()=>[t(ue,{onClick:gt},{default:l(()=>[t(d(dl)),e[34]||(e[34]=a(" Import JSON ",-1))]),_:1}),t(ue,{onClick:_t},{default:l(()=>[t(d(rl)),e[35]||(e[35]=a(" Export JSON ",-1))]),_:1}),t(Qt),t(ue,{onClick:kt},{default:l(()=>[t(d(pl)),e[36]||(e[36]=a(" Settings ",-1))]),_:1}),t(ue,{onClick:bt},{default:l(()=>[t(Vt),e[37]||(e[37]=a(" Shortcuts ",-1))]),_:1})]),_:1})]),default:l(()=>[t(p,null,{default:l(()=>[t(d(il))]),_:1})]),_:1}),t(p,{onClick:ae},{default:l(()=>[t(d(Ge)),e[38]||(e[38]=a(" Save draft",-1))]),_:1}),t(p,{type:"primary",onClick:Mt},{default:l(()=>[t(d(vl)),e[39]||(e[39]=a(" Save module",-1))]),_:1})]),_:1})]),_:1},8,["sub-title"]),Oe.value?(v(),c("div",kl,[t(j,{type:"info","show-icon":"",message:"Draft restored",description:"We found a saved draft for this module and restored it.",closable:"",onClose:e[0]||(e[0]=n=>Oe.value=!1)})])):O("",!0),t(ge,{class:"progress-card",bordered:!1},{default:l(()=>[t(me,{gutter:16,align:"middle"},{default:l(()=>[t(I,{xs:24,md:12},{default:l(()=>[t(h,{direction:"vertical",style:{width:"100%"}},{default:l(()=>[t(M,{type:"secondary"},{default:l(()=>[...e[40]||(e[40]=[a("Completeness",-1)])]),_:1}),t(Wt,{percent:G.value,status:G.value>=90?"success":G.value>=60?"normal":"active"},null,8,["percent","status"]),t(M,{type:"secondary"},{default:l(()=>[a(m(rt.value),1)]),_:1})]),_:1})]),_:1}),t(I,{xs:24,md:12},{default:l(()=>[t(h,{direction:"vertical",style:{width:"100%"}},{default:l(()=>[t(M,{type:"secondary"},{default:l(()=>[...e[41]||(e[41]=[a("Totals",-1)])]),_:1}),D("div",bl,[t(_,{color:"blue"},{default:l(()=>[a("Lessons: "+m(s.lessons.length),1)]),_:1}),t(_,{color:"purple"},{default:l(()=>[a("Minutes: "+m(Ae.value),1)]),_:1}),t(_,{color:"volcano"},{default:l(()=>[a("Quizzes: "+m(it.value),1)]),_:1}),t(_,{color:"geekblue"},{default:l(()=>[a("Assignments: "+m(dt.value),1)]),_:1}),Pt.value?(v(),R(_,{key:0,color:"orange"},{default:l(()=>[a("Warnings: "+m(je.value.length),1)]),_:1})):O("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),t(ge,{class:"form-card",bordered:""},{default:l(()=>[t(ee,{layout:"vertical",model:s},{default:l(()=>[t(f,{label:"Module Title",name:"title",rules:[{required:!0,message:"Title is required"}],"validate-status":s.title?"":"warning",help:s.title?"":"A strong, student-focused title helps discoverability."},{default:l(()=>[t(L,{value:s.title,"onUpdate:value":e[1]||(e[1]=n=>s.title=n),placeholder:"e.g. Composition API Basics",onBlur:Rt},null,8,["value"])]),_:1},8,["validate-status","help"]),t(me,{gutter:16},{default:l(()=>[t(I,{xs:24,md:16},{default:l(()=>[t(f,{label:"Description"},{default:l(()=>[t(N,{value:s.description,"onUpdate:value":e[2]||(e[2]=n=>s.description=n),rows:"3",placeholder:"What will students learn in this module?"},null,8,["value"])]),_:1}),t(f,{label:"Learning Objectives (tags)"},{default:l(()=>[t(Y,{value:s.objectives,"onUpdate:value":e[3]||(e[3]=n=>s.objectives=n),mode:"tags",placeholder:"Add objectives (press Enter)","token-separators":[","],options:ut},null,8,["value"]),t(M,{type:"secondary"},{default:l(()=>[...e[42]||(e[42]=[a(" Tip: Keep objectives measurable and concise. ",-1)])]),_:1})]),_:1})]),_:1}),t(I,{xs:24,md:8},{default:l(()=>[t(f,{label:"Visibility"},{default:l(()=>[t(ye,{checked:s.isPublic,"onUpdate:checked":e[4]||(e[4]=n=>s.isPublic=n),"checked-children":"Public","un-checked-children":"Private"},null,8,["checked"])]),_:1}),t(f,{label:"Module Availability"},{default:l(()=>[t(We,{value:s.unlockAt,"onUpdate:value":e[5]||(e[5]=n=>s.unlockAt=n),"show-time":"",style:{width:"100%"},placeholder:"Optional unlock date/time"},null,8,["value"])]),_:1}),t(f,{label:"Module Slug (URL)"},{default:l(()=>[t(L,{value:s.slug,"onUpdate:value":e[6]||(e[6]=n=>s.slug=n),placeholder:"auto-generated-from-title"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(X,{orientation:"left"},{default:l(()=>[e[43]||(e[43]=a(" Lessons ",-1)),D("span",Cl,"("+m(s.lessons.length)+")",1)]),_:1}),t(h,{style:{"margin-bottom":"12px"},wrap:""},{default:l(()=>[t(p,{type:"dashed",onClick:e[7]||(e[7]=n=>E())},{default:l(()=>[t(d(re)),e[44]||(e[44]=a(" Add lesson ",-1))]),_:1}),t(p,{onClick:ce},{default:l(()=>[...e[45]||(e[45]=[a("Expand all",-1)])]),_:1}),t(p,{onClick:Je},{default:l(()=>[...e[46]||(e[46]=[a("Collapse all",-1)])]),_:1}),t(p,{onClick:Ee},{default:l(()=>[t(d(Ye)),e[47]||(e[47]=a(" Add checkpoint quiz ",-1))]),_:1}),t(p,{onClick:Be},{default:l(()=>[t(d(be)),e[48]||(e[48]=a(" Add mini assignment ",-1))]),_:1}),t(p,{onClick:fe},{default:l(()=>[t(d(Xe)),e[49]||(e[49]=a(" Add intro video ",-1))]),_:1}),t(_,{color:"blue"},{default:l(()=>[a("Total time: "+m(Ae.value)+" min",1)]),_:1})]),_:1}),t(h,{style:{"margin-bottom":"12px"}},{default:l(()=>[t(Ke,{title:"Undo (Ctrl/Cmd+Z)"},{default:l(()=>[t(p,{disabled:!De.value,onClick:Le},{default:l(()=>[t(d(fl)),e[50]||(e[50]=a(" Undo ",-1))]),_:1},8,["disabled"])]),_:1}),t(Ke,{title:"Redo (Ctrl/Cmd+Shift+Z)"},{default:l(()=>[t(p,{disabled:!Te.value,onClick:Ne},{default:l(()=>[t(d(cl)),e[51]||(e[51]=a(" Redo ",-1))]),_:1},8,["disabled"])]),_:1}),t(X,{type:"vertical"}),t(M,{type:"secondary"},{default:l(()=>[a("History: "+m(x.value+1)+" / "+m(A.value.length),1)]),_:1})]),_:1}),t(Yt,{activeKey:T.value,"onUpdate:activeKey":e[8]||(e[8]=n=>T.value=n)},{default:l(()=>[(v(!0),c(z,null,J(s.lessons,(n,y)=>(v(),R(Gt,{key:n.id,header:pt(n,y)},{default:l(()=>[t(me,{gutter:16},{default:l(()=>[t(I,{xs:24,md:16},{default:l(()=>[t(ee,{layout:"vertical"},{default:l(()=>[t(f,{label:"Title",rules:[{required:!0,message:"Lesson title is required"}]},{default:l(()=>[t(L,{value:n.title,"onUpdate:value":u=>n.title=u,placeholder:"e.g. Reactive primitives"},null,8,["value","onUpdate:value"])]),_:2},1024),t(f,{label:"Type"},{default:l(()=>[t(Y,{value:n.type,"onUpdate:value":u=>n.type=u,style:{width:"100%"}},{default:l(()=>[t(B,{value:"video"},{default:l(()=>[t(d(Xe)),e[52]||(e[52]=a(" Video ",-1))]),_:1}),t(B,{value:"reading"},{default:l(()=>[t(d(ml)),e[53]||(e[53]=a(" Reading ",-1))]),_:1}),t(B,{value:"quiz"},{default:l(()=>[t(d(Ye)),e[54]||(e[54]=a(" Quiz ",-1))]),_:1}),t(B,{value:"assignment"},{default:l(()=>[t(d(be)),e[55]||(e[55]=a(" Assignment ",-1))]),_:1})]),_:1},8,["value","onUpdate:value"])]),_:2},1024),n.type==="video"?(v(),c(z,{key:0},[t(f,{label:"Video URL"},{default:l(()=>[t(L,{value:n.videoUrl,"onUpdate:value":u=>n.videoUrl=u,placeholder:"https://..."},null,8,["value","onUpdate:value"])]),_:2},1024),t(f,{label:"Transcript / Notes"},{default:l(()=>[t(N,{value:n.content,"onUpdate:value":u=>n.content=u,rows:"4"},null,8,["value","onUpdate:value"])]),_:2},1024)],64)):n.type==="reading"?(v(),c(z,{key:1},[t(f,{label:"Article / Notes"},{default:l(()=>[t(N,{value:n.content,"onUpdate:value":u=>n.content=u,rows:"6",placeholder:"Paste or write the reading content..."},null,8,["value","onUpdate:value"])]),_:2},1024),ze(n.content)>0?(v(),R(j,{key:0,type:"info","show-icon":"",message:`Estimated reading time: ${ze(n.content)} min`},null,8,["message"])):O("",!0)],64)):n.type==="assignment"?(v(),c(z,{key:2},[t(f,{label:"Brief"},{default:l(()=>[t(N,{value:n.content,"onUpdate:value":u=>n.content=u,rows:"4",placeholder:"Describe the task students must complete"},null,8,["value","onUpdate:value"])]),_:2},1024),t(f,{label:"Rubric (optional)"},{default:l(()=>[t(N,{value:n.rubric,"onUpdate:value":u=>n.rubric=u,rows:"3",placeholder:"How will you grade it?"},null,8,["value","onUpdate:value"])]),_:2},1024)],64)):n.type==="quiz"?(v(),c(z,{key:3},[t(X,{orientation:"left"},{default:l(()=>[...e[56]||(e[56]=[a("Questions",-1)])]),_:1}),n.quiz?.questions?.length?O("",!0):(v(),c("div",wl,[t(Kt,{description:"No questions yet"})])),(v(!0),c(z,null,J(n.quiz?.questions||[],(u,q)=>(v(),c("div",{key:u.id,class:"quiz-q"},[t(ge,{size:"small",title:`Q${q+1}`,style:{"margin-bottom":"8px"}},{default:l(()=>[t(ee,{layout:"vertical"},{default:l(()=>[t(f,{label:"Question"},{default:l(()=>[t(L,{value:u.text,"onUpdate:value":k=>u.text=k},null,8,["value","onUpdate:value"])]),_:2},1024),t(f,{label:"Type"},{default:l(()=>[t(Y,{value:u.type,"onUpdate:value":k=>u.type=k,style:{width:"100%"}},{default:l(()=>[t(B,{value:"mcq"},{default:l(()=>[...e[57]||(e[57]=[a("Multiple choice",-1)])]),_:1}),t(B,{value:"tf"},{default:l(()=>[...e[58]||(e[58]=[a("True/False",-1)])]),_:1}),t(B,{value:"short"},{default:l(()=>[...e[59]||(e[59]=[a("Short answer",-1)])]),_:1})]),_:1},8,["value","onUpdate:value"])]),_:2},1024),u.type==="mcq"?(v(),R(f,{key:0,label:"Options"},{default:l(()=>[(v(!0),c(z,null,J(u.options,(k,Fe)=>(v(),c("div",{key:Fe,class:"mcq-opt"},[t(L,{value:k.text,"onUpdate:value":de=>k.text=de,style:{width:"70%"},placeholder:"Option text"},null,8,["value","onUpdate:value"]),t(Zt,{checked:k.correct,"onUpdate:checked":de=>k.correct=de,style:{"margin-left":"8px"}},{default:l(()=>[...e[60]||(e[60]=[a("Correct",-1)])]),_:1},8,["checked","onUpdate:checked"]),t(p,{danger:"",type:"text",onClick:de=>zt(y,q,Fe)},{default:l(()=>[t(d(pe))]),_:1},8,["onClick"])]))),128)),t(p,{size:"small",type:"dashed",onClick:k=>qt(y,q),style:{"margin-top":"6px"}},{default:l(()=>[t(d(re)),e[61]||(e[61]=a(" Add option ",-1))]),_:1},8,["onClick"])]),_:2},1024)):u.type==="tf"?(v(),R(j,{key:1,type:"info","show-icon":"",message:"This will be a True/False question."})):u.type==="short"?(v(),R(j,{key:2,type:"info","show-icon":"",message:"This will be a short, free-text answer."})):O("",!0),D("div",Ul,[t(h,null,{default:l(()=>[t(p,{size:"small",onClick:k=>Ve(y,q,-1)},{default:l(()=>[t(d(et))]),_:1},8,["onClick"]),t(p,{size:"small",onClick:k=>Ve(y,q,1)},{default:l(()=>[t(d(tt))]),_:1},8,["onClick"]),t(p,{size:"small",danger:"",onClick:k=>Ot(y,q)},{default:l(()=>[t(d(pe))]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1032,["title"])]))),128)),t(h,null,{default:l(()=>[t(p,{type:"dashed",size:"small",onClick:u=>Ut(y)},{default:l(()=>[t(d(re)),e[62]||(e[62]=a(" Add question ",-1))]),_:1},8,["onClick"]),t(p,{size:"small",onClick:u=>At(y)},{default:l(()=>[t(d(ke)),e[63]||(e[63]=a(" Seed 5 MCQ ",-1))]),_:1},8,["onClick"])]),_:2},1024)],64)):O("",!0)]),_:2},1024)]),_:2},1024),t(I,{xs:24,md:8},{default:l(()=>[t(ee,{layout:"vertical"},{default:l(()=>[t(f,{label:"Estimated Time (min)"},{default:l(()=>[t(Ze,{value:n.duration,"onUpdate:value":u=>n.duration=u,min:1,max:600,style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024),t(f,{label:"Prerequisite lessons (IDs)"},{default:l(()=>[t(Y,{value:n.prerequisites,"onUpdate:value":u=>n.prerequisites=u,mode:"multiple",options:vt(y),placeholder:"Optional"},null,8,["value","onUpdate:value","options"])]),_:2},1024),t(f,{label:"Tags"},{default:l(()=>[t(Y,{value:n.tags,"onUpdate:value":u=>n.tags=u,mode:"tags",placeholder:"Add tags"},null,8,["value","onUpdate:value"])]),_:2},1024),t(f,{label:"Availability"},{default:l(()=>[t(We,{value:n.unlockAt,"onUpdate:value":u=>n.unlockAt=u,"show-time":"",style:{width:"100%"},placeholder:"Optional"},null,8,["value","onUpdate:value"])]),_:2},1024),t(f,{label:"Resources (links)"},{default:l(()=>[(v(!0),c(z,null,J(n.resources,(u,q)=>(v(),c("div",{key:q,class:"resource-row"},[t(L,{value:u.title,"onUpdate:value":k=>u.title=k,placeholder:"Title",style:{width:"35%"}},null,8,["value","onUpdate:value"]),t(L,{value:u.url,"onUpdate:value":k=>u.url=k,placeholder:"https://…",style:{width:"55%","margin-left":"8px"}},null,8,["value","onUpdate:value"]),t(p,{type:"text",danger:"",onClick:k=>ht(y,q)},{default:l(()=>[t(d(pe))]),_:1},8,["onClick"])]))),128)),t(p,{size:"small",type:"dashed",onClick:u=>xt(y),style:{"margin-top":"6px"}},{default:l(()=>[t(d(re)),e[64]||(e[64]=a(" Add resource ",-1))]),_:1},8,["onClick"])]),_:2},1024),t(f,{label:"Attachments"},{default:l(()=>[t(Ft,{"file-list":n.attachments,"onUpdate:fileList":u=>n.attachments=u,"before-upload":()=>!1,multiple:!0},{default:l(()=>[t(p,{size:"small"},{default:l(()=>[t(d(be)),e[65]||(e[65]=a(" Add files",-1))]),_:1})]),_:1},8,["file-list","onUpdate:fileList"])]),_:2},1024),D("div",Ol,[t(h,{wrap:""},{default:l(()=>[t(p,{onClick:u=>Ct(y)},{default:l(()=>[t(d(ke)),e[66]||(e[66]=a(" Duplicate",-1))]),_:1},8,["onClick"]),t(p,{onClick:u=>o.previewLesson(n)},{default:l(()=>[t(d(gl)),e[67]||(e[67]=a(" Preview",-1))]),_:1},8,["onClick"]),t(p,{onClick:u=>Pe(y,-1)},{default:l(()=>[t(d(et))]),_:1},8,["onClick"]),t(p,{onClick:u=>Pe(y,1)},{default:l(()=>[t(d(tt))]),_:1},8,["onClick"]),t(Ht,{title:"Delete this lesson?",onConfirm:u=>wt(y)},{default:l(()=>[t(p,{danger:""},{default:l(()=>[t(d(pe)),e[68]||(e[68]=a(" Delete",-1))]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024),Ie(y).length?(v(),c("div",ql,[(v(!0),c(z,null,J(Ie(y),(u,q)=>(v(),R(j,{key:q,type:"warning","show-icon":"",message:u,style:{"margin-top":"8px"}},null,8,["message"]))),128))])):O("",!0)]),_:2},1032,["header"]))),128))]),_:1},8,["activeKey"])]),_:1},8,["model"])]),_:1}),t(Q,{open:Ue.value,"onUpdate:open":e[9]||(e[9]=n=>Ue.value=n),title:"Student Preview",width:"720px",footer:null},{default:l(()=>[C.value?(v(),c("div",zl,[t($,{level:4},{default:l(()=>[a(m(C.value.title),1)]),_:1}),t(h,{direction:"vertical",style:{width:"100%"}},{default:l(()=>[t(_,null,{default:l(()=>[a(m(C.value.type),1)]),_:1}),t(M,{type:"secondary"},{default:l(()=>[a("Estimated: "+m(C.value.duration||0)+" min",1)]),_:1}),C.value.type==="video"&&C.value.videoUrl?(v(),c("div",Al,[t(M,{strong:""},{default:l(()=>[...e[69]||(e[69]=[a("Video:",-1)])]),_:1}),D("div",xl,m(C.value.videoUrl),1)])):O("",!0),C.value.content?(v(),c("div",hl,[t(M,{strong:""},{default:l(()=>[...e[70]||(e[70]=[a("Content:",-1)])]),_:1}),t(_e,null,{default:l(()=>[a(m(C.value.content),1)]),_:1})])):O("",!0),C.value.type==="quiz"&&C.value.quiz?.questions?.length?(v(),c("div",Sl,[t(X,null,{default:l(()=>[...e[71]||(e[71]=[a("Questions",-1)])]),_:1}),D("ol",Dl,[(v(!0),c(z,null,J(C.value.quiz.questions,n=>(v(),c("li",{key:n.id},m(n.text),1))),128))])])):O("",!0),C.value.resources?.length?(v(),c("div",Tl,[t(X,null,{default:l(()=>[...e[72]||(e[72]=[a("Resources",-1)])]),_:1}),D("ul",null,[(v(!0),c(z,null,J(C.value.resources,(n,y)=>(v(),c("li",{key:y},[D("a",{href:ft(n.url),target:"_blank"},m(n.title||n.url),9,$l)]))),128))])])):O("",!0)]),_:1})])):O("",!0)]),_:1},8,["open"]),t(Q,{open:W.value,"onUpdate:open":e[11]||(e[11]=n=>W.value=n),title:"Lesson templates",onOk:Dt,onCancel:e[12]||(e[12]=n=>W.value=!1)},{default:l(()=>[t(Xt,{value:ve.value,"onUpdate:value":e[10]||(e[10]=n=>ve.value=n),style:{width:"100%"}},{default:l(()=>[t(ie,{value:"video:intro"},{default:l(()=>[...e[73]||(e[73]=[a("Intro video (goals + overview)",-1)])]),_:1}),t(ie,{value:"reading:notes"},{default:l(()=>[...e[74]||(e[74]=[a("Concept reading (definitions + examples)",-1)])]),_:1}),t(ie,{value:"quiz:checkpoint"},{default:l(()=>[...e[75]||(e[75]=[a("Checkpoint quiz (5 MCQs)",-1)])]),_:1}),t(ie,{value:"assignment:mini"},{default:l(()=>[...e[76]||(e[76]=[a("Mini assignment (15-30 min)",-1)])]),_:1})]),_:1},8,["value"])]),_:1},8,["open"]),t(Q,{open:K.value,"onUpdate:open":e[14]||(e[14]=n=>K.value=n),title:"Bulk add lessons",onOk:$t,onCancel:e[15]||(e[15]=n=>K.value=!1),"ok-text":"Create"},{default:l(()=>[t(_e,null,{default:l(()=>[...e[77]||(e[77]=[a(" Paste lines like: ",-1),D("code",null,"Video | Composition API intro | 8",-1),a(" (Type | Title | Minutes). One per line. ",-1)])]),_:1}),t(N,{value:te.value,"onUpdate:value":e[13]||(e[13]=n=>te.value=n),rows:"6",placeholder:`Video | Setup dev env | 6
Reading | Reactivity notes | 10`},null,8,["value"])]),_:1},8,["open"]),t(Q,{open:Z.value,"onUpdate:open":e[17]||(e[17]=n=>Z.value=n),title:"Import JSON","ok-text":"Import",onOk:yt,onCancel:e[18]||(e[18]=n=>Z.value=!1)},{default:l(()=>[t(_e,null,{default:l(()=>[...e[78]||(e[78]=[a(" Paste a JSON export of a module. This overwrites the current form. ",-1)])]),_:1}),t(N,{value:le.value,"onUpdate:value":e[16]||(e[16]=n=>le.value=n),rows:10,placeholder:'{"title":"...","lessons":[...]}'},null,8,["value"])]),_:1},8,["open"]),t(Q,{open:oe.value,"onUpdate:open":e[19]||(e[19]=n=>oe.value=n),title:"Export JSON",footer:null,onCancel:e[20]||(e[20]=n=>oe.value=!1),width:"720px"},{default:l(()=>[t(j,{type:"success",message:"Copy the JSON below","show-icon":"",style:{"margin-bottom":"12px"}}),t(N,{value:qe.value,rows:14},null,8,["value"])]),_:1},8,["open"]),t(Q,{open:F.value,"onUpdate:open":e[24]||(e[24]=n=>F.value=n),title:"Module settings","ok-text":"Done",onOk:e[25]||(e[25]=n=>F.value=!1),onCancel:e[26]||(e[26]=n=>F.value=!1)},{default:l(()=>[t(ee,{layout:"vertical"},{default:l(()=>[t(f,{label:"Default lesson duration (min)"},{default:l(()=>[t(Ze,{value:U.defaultDuration,"onUpdate:value":e[21]||(e[21]=n=>U.defaultDuration=n),min:1,max:600},null,8,["value"])]),_:1}),t(f,{label:"Warn if lesson missing title"},{default:l(()=>[t(ye,{checked:U.warnMissingTitle,"onUpdate:checked":e[22]||(e[22]=n=>U.warnMissingTitle=n)},null,8,["checked"])]),_:1}),t(f,{label:"Warn if duration is 0"},{default:l(()=>[t(ye,{checked:U.warnZeroDuration,"onUpdate:checked":e[23]||(e[23]=n=>U.warnZeroDuration=n)},null,8,["checked"])]),_:1})]),_:1})]),_:1},8,["open"]),t(Q,{open:ne.value,"onUpdate:open":e[27]||(e[27]=n=>ne.value=n),title:"Keyboard shortcuts",footer:null,onCancel:e[28]||(e[28]=n=>ne.value=!1)},{default:l(()=>[t(se,{bordered:"",column:1,size:"small"},{default:l(()=>[t(w,{label:"Save draft"},{default:l(()=>[...e[79]||(e[79]=[a("Ctrl/Cmd + S",-1)])]),_:1}),t(w,{label:"Add lesson"},{default:l(()=>[...e[80]||(e[80]=[a("Ctrl/Cmd + Enter",-1)])]),_:1}),t(w,{label:"Undo"},{default:l(()=>[...e[81]||(e[81]=[a("Ctrl/Cmd + Z",-1)])]),_:1}),t(w,{label:"Redo"},{default:l(()=>[...e[82]||(e[82]=[a("Ctrl/Cmd + Shift + Z",-1)])]),_:1}),t(w,{label:"Expand all"},{default:l(()=>[...e[83]||(e[83]=[a("Ctrl/Cmd + .",-1)])]),_:1}),t(w,{label:"Collapse all"},{default:l(()=>[...e[84]||(e[84]=[a("Ctrl/Cmd + ,",-1)])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}}),Ql=yl(Ll,[["__scopeId","data-v-a217beca"]]);export{Ql as default};
