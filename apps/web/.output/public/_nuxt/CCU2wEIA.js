import{g as B,ai as Q,l as A,p as o,c as N,o as i,a as p,b as n,w as a,d,I as R,J as T,q as C,t as _,r as I,k as U,aj as H,ak as J,x as P,K as W,m as h,_ as X}from"./DQDUwbr-.js";import{g as Y}from"./Cq7Gmhky.js";const Z={class:"mb-3 flex items-center justify-between"},ee={class:"flex items-center gap-2"},te={class:"flex items-center gap-2"},ae=B({__name:"AppNav",setup(V){const m=Y`query Me { me { id email displayName roles } }`,{result:f}=Q(m),b=A(()=>f.value?.me||null);return(u,s)=>{const r=o("a-button"),v=o("a-tag"),y=o("a-avatar");return i(),N("div",Z,[p("div",ee,[n(r,{type:"link",onClick:s[0]||(s[0]=l=>u.$router.push("/explore"))},{default:a(()=>[...s[5]||(s[5]=[d("Explore",-1)])]),_:1}),n(r,{type:"link",onClick:s[1]||(s[1]=l=>u.$router.push("/courses"))},{default:a(()=>[...s[6]||(s[6]=[d("Courses",-1)])]),_:1}),n(r,{type:"link",onClick:s[2]||(s[2]=l=>u.$router.push("/assignments"))},{default:a(()=>[...s[7]||(s[7]=[d("Assignments",-1)])]),_:1}),n(r,{type:"link",onClick:s[3]||(s[3]=l=>u.$router.push("/institutions"))},{default:a(()=>[...s[8]||(s[8]=[d("Institutions",-1)])]),_:1}),n(r,{type:"link",onClick:s[4]||(s[4]=l=>u.$router.push("/analytics"))},{default:a(()=>[...s[9]||(s[9]=[d("Analytics",-1)])]),_:1})]),p("div",te,[(i(!0),N(R,null,T(b.value?.roles||[],l=>(i(),C(v,{key:l,color:"gold"},{default:a(()=>[d(_(l),1)]),_:2},1024))),128)),n(y,null,{default:a(()=>[d(_(b.value?.displayName?.[0]||"?"),1)]),_:1})])])}}}),se={class:"grid md:grid-cols-3 gap-3 mb-4"},ne={class:"stat"},oe={class:"stat"},de={class:"stat"},le=B({__name:"[courseId]",setup(V){const m=H(),f=J(),b=I("grades");function u(t){f.push(t)}function s(){f.back()}function r(){f.push("/login")}const v=I({id:"u123",email:"test@example.com",displayName:"Demo Teacher",roles:["TEACHER"]}),y=I(!0),l=I([]);U(()=>{setTimeout(()=>{l.value=[{id:"g1",assignmentId:"ass1",studentId:"stu1",courseId:m.params.courseId||"course-demo",grade:92,feedback:"Excellent work!",updatedAt:new Date().toISOString()},{id:"g2",assignmentId:"ass1",studentId:"stu2",courseId:m.params.courseId||"course-demo",grade:null,feedback:"",updatedAt:new Date().toISOString()},{id:"g3",assignmentId:"ass2",studentId:"stu1",courseId:m.params.courseId||"course-demo",grade:80,feedback:"Solid job.",updatedAt:new Date().toISOString()}],y.value=!1},400)});const E=A(()=>l.value.map(t=>({...t,key:t.id}))),M=I("Demo Course Title");async function G(t){const e=l.value.find(c=>c.assignmentId===t.assignmentId&&c.studentId===t.studentId&&c.courseId===t.courseId);e&&(t.grade!=null&&(e.grade=t.grade),t.feedback!=null&&(e.feedback=t.feedback),e.updatedAt=new Date().toISOString())}const w=A(()=>{const t=E.value;if(!t.length)return{avg:null,submitted:0,ungraded:0};const e=t.filter(k=>typeof k.grade=="number");return{avg:e.length?(e.reduce((k,$)=>k+($.grade||0),0)/e.length).toFixed(2):null,submitted:e.length,ungraded:t.length-e.length}}),z=[{title:"Student",dataIndex:"studentId"},{title:"Assignment",dataIndex:"assignmentId"},{title:"Grade",dataIndex:"grade",customRender:({record:t})=>h("a-input-number",{modelValue:t.grade,min:0,max:100,step:1,style:"width:80px",async onChange(e){await G({assignmentId:t.assignmentId,studentId:t.studentId,courseId:t.courseId,grade:Number(e)})}})},{title:"Feedback",dataIndex:"feedback",customRender:({record:t})=>h("a-input",{modelValue:t.feedback||"",placeholder:"Enter feedback…",style:"min-width:180px",async onChange(e){await G({assignmentId:t.assignmentId,studentId:t.studentId,courseId:t.courseId,feedback:String(e?.target?.value||"")})}})},{title:"Updated",dataIndex:"updatedAt"}];return(t,e)=>{const c=o("a-tag"),k=o("a-button"),$=o("a-space"),K=o("a-page-header"),S=o("a-breadcrumb-item"),L=o("a-breadcrumb"),O=o("a-alert"),j=o("a-table"),D=o("a-tab-pane"),x=o("a-card"),q=o("a-tabs"),F=o("a-layout");return i(),C(F,{class:"gradebook-wrap p-6"},{default:a(()=>[n(ae),n(K,{class:"gradebook-header",title:`Gradebook · ${M.value||P(m).params.courseId}`,"sub-title":"Manage grades and analytics",onBack:s},{extra:a(()=>[n($,null,{default:a(()=>[(i(!0),N(R,null,T(v.value?.roles||[],g=>(i(),C(c,{key:g,color:"blue"},{default:a(()=>[d(_(g),1)]),_:2},1024))),128)),v.value?W("",!0):(i(),C(k,{key:0,type:"primary",onClick:r},{default:a(()=>[...e[3]||(e[3]=[d(" Login ",-1)])]),_:1}))]),_:1})]),_:1},8,["title"]),n(L,{class:"mb-3"},{default:a(()=>[n(S,{onClick:e[0]||(e[0]=g=>u("/explore"))},{default:a(()=>[...e[4]||(e[4]=[d("Explore",-1)])]),_:1}),n(S,{onClick:e[1]||(e[1]=g=>u("/courses"))},{default:a(()=>[...e[5]||(e[5]=[d("Courses",-1)])]),_:1}),n(S,null,{default:a(()=>[...e[6]||(e[6]=[d("Gradebook",-1)])]),_:1})]),_:1}),n(x,{class:"shadow-sm"},{default:a(()=>[n(q,{activeKey:b.value,"onUpdate:activeKey":e[2]||(e[2]=g=>b.value=g)},{default:a(()=>[n(D,{key:"grades",tab:"Grades"},{default:a(()=>[n(O,{type:"info",message:"Click a grade or feedback cell to edit; changes save instantly via GraphQL.",class:"mb-3","show-icon":""}),n(j,{"data-source":E.value,columns:z,"row-key":"id",loading:y.value,size:"middle",bordered:""},null,8,["data-source","loading"])]),_:1}),n(D,{key:"analytics",tab:"Analytics"},{default:a(()=>[p("div",se,[n(x,{size:"small",title:"Average Grade"},{default:a(()=>[p("h2",ne,_(w.value.avg??"—"),1)]),_:1}),n(x,{size:"small",title:"Submitted"},{default:a(()=>[p("h2",oe,_(w.value.submitted),1)]),_:1}),n(x,{size:"small",title:"Ungraded"},{default:a(()=>[p("h2",de,_(w.value.ungraded),1)]),_:1})])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1})}}}),ie=X(le,[["__scopeId","data-v-7259bded"]]);export{ie as default};
