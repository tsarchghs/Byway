import{g as h,U as k,ar as x,r as l,k as B,q as C,w as u,p as a,o as w,b as e,d as I}from"./DQDUwbr-.js";import{u as b}from"./DL41CzME.js";const N=h({__name:"[slug]",setup(q){const i=k(),d=x(),m=i.params.slug,o=l(null),r=l([]),c=l(!0),_=[{title:"Name",dataIndex:"name"},{title:"Code",dataIndex:"code"}],p=()=>d.push("/institutions");return B(async()=>{const{call:s}=b();try{const t=await s(`query ($slug:String!) {
        institutionBySlug(slug:$slug) { id name slug }
      }`,{slug:m});if(o.value=t?.institutionBySlug||null,o.value?.id){const n=await s(`query ($id:String!) {
          classrooms(institutionId:$id) { id name code }
        }`,{id:o.value.id});r.value=n?.classrooms||[]}}catch(t){console.error("Institution/Classrooms load failed:",t)}finally{c.value=!1}}),(s,t)=>{const n=a("a-page-header"),g=a("a-typography-title"),f=a("a-table"),y=a("a-card"),v=a("a-layout");return w(),C(v,{class:"p-6"},{default:u(()=>[e(n,{title:o.value?.name||"Institution",onBack:p},null,8,["title"]),e(y,{class:"mt-4",bordered:!1},{default:u(()=>[e(g,{level:5},{default:u(()=>[...t[0]||(t[0]=[I("Classrooms",-1)])]),_:1}),e(f,{"data-source":r.value,columns:_,"row-key":"id",size:"small",loading:c.value},null,8,["data-source","loading"])]),_:1})]),_:1})}}});export{N as default};
