const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CozDb8FN.js","./DQDUwbr-.js","./entry.Cjiyjx8B.css"])))=>i.map(i=>d[i]);
import{H as R}from"./CN_SqyUH.js";import{_ as U,j as C,r as I,p as r,q as T,o as S,w as a,b as e,a as A,x as P,Q as O,R as h,d,U as M,V as B,W as V,X as D,Y as G,Z as K,$ as W,a0 as H,a1 as E,n as N,a2 as F,k as j,c as z,I as Q}from"./DQDUwbr-.js";import{u as X}from"./CI-SnmTa.js";import{g as x}from"./Cq7Gmhky.js";import"./Cv_gb3jg.js";import"./CLh6bXrM.js";const Y={class:"signin-actions"},Z={__name:"SignInForm",emits:["submit"],setup($,{emit:c}){const f=c,t=C({email:"",password:"",remember:!1}),l=I(!1),g={email:[{required:!0,message:"Please enter your email",trigger:"blur"},{type:"email",message:"Invalid email format",trigger:"blur"}],password:[{required:!0,message:"Please enter your password",trigger:"blur"}]},b=()=>{l.value=!0,setTimeout(()=>{l.value=!1,f("submit",{...t})},800)};return(y,s)=>{const o=r("a-input"),i=r("a-form-item"),m=r("a-input-password"),v=r("a-checkbox"),n=r("a-typography-link"),p=r("a-button"),_=r("a-divider"),k=r("a-space"),u=r("a-form");return S(),T(u,{layout:"vertical",model:t,rules:g,onFinish:b,class:"signin-form"},{default:a(()=>[e(i,{name:"email",label:"Email"},{default:a(()=>[e(o,{value:t.email,"onUpdate:value":s[0]||(s[0]=w=>t.email=w),placeholder:"Enter your email address"},{prefix:a(()=>[e(P(O))]),_:1},8,["value"])]),_:1}),e(i,{name:"password",label:"Password"},{default:a(()=>[e(m,{value:t.password,"onUpdate:value":s[1]||(s[1]=w=>t.password=w),placeholder:"Enter your password"},{prefix:a(()=>[e(P(h))]),_:1},8,["value"])]),_:1}),A("div",Y,[e(v,{checked:t.remember,"onUpdate:checked":s[2]||(s[2]=w=>t.remember=w)},{default:a(()=>[...s[3]||(s[3]=[d("Remember me",-1)])]),_:1},8,["checked"]),e(n,{href:"/forgot-password",class:"forgot-link"},{default:a(()=>[...s[4]||(s[4]=[d(" Forgot password? ",-1)])]),_:1})]),e(i,null,{default:a(()=>[e(p,{type:"primary","html-type":"submit",block:"",loading:l.value},{default:a(()=>[...s[5]||(s[5]=[d(" Sign In ",-1)])]),_:1},8,["loading"])]),_:1}),e(_,null,{default:a(()=>[...s[6]||(s[6]=[d("Or sign in with",-1)])]),_:1}),e(k,{direction:"vertical",style:{width:"100%"}},{default:a(()=>[e(p,{block:"",icon:"<GoogleOutlined />"},{default:a(()=>[...s[7]||(s[7]=[d("Google",-1)])]),_:1}),e(p,{block:"",icon:"<FacebookFilled />"},{default:a(()=>[...s[8]||(s[8]=[d("Facebook",-1)])]),_:1}),e(p,{block:"",icon:"<WindowsFilled />"},{default:a(()=>[...s[9]||(s[9]=[d("Microsoft",-1)])]),_:1})]),_:1})]),_:1},8,["model"])}}},J=U(Z,[["__scopeId","data-v-4be98055"]]),ee={__name:"SignUpForm",emits:["submit"],setup($,{emit:c}){const f=c,t=C({firstName:"",lastName:"",email:"",password:"",confirm:""}),l=I(!1),g={firstName:[{required:!0,message:"Please enter your first name"}],lastName:[{required:!0,message:"Please enter your last name"}],email:[{required:!0,message:"Please enter your email"},{type:"email",message:"Invalid email format"}],password:[{required:!0,message:"Please enter your password"}],confirm:[{required:!0,message:"Please confirm your password"}]},b=(s,o)=>o!==t.password?Promise.reject("Passwords do not match"):Promise.resolve(),y=()=>{l.value=!0,setTimeout(()=>{l.value=!1,f("submit",{...t})},800)};return(s,o)=>{const i=r("a-input"),m=r("a-form-item"),v=r("a-input-password"),n=r("a-button"),p=r("a-divider"),_=r("a-space"),k=r("a-form");return S(),T(k,{layout:"vertical",model:t,rules:g,onFinish:y},{default:a(()=>[e(m,{name:"firstName",label:"First Name"},{default:a(()=>[e(i,{value:t.firstName,"onUpdate:value":o[0]||(o[0]=u=>t.firstName=u),placeholder:"Enter your first name"},null,8,["value"])]),_:1}),e(m,{name:"lastName",label:"Last Name"},{default:a(()=>[e(i,{value:t.lastName,"onUpdate:value":o[1]||(o[1]=u=>t.lastName=u),placeholder:"Enter your last name"},null,8,["value"])]),_:1}),e(m,{name:"email",label:"Email"},{default:a(()=>[e(i,{value:t.email,"onUpdate:value":o[2]||(o[2]=u=>t.email=u),placeholder:"Enter your email"},null,8,["value"])]),_:1}),e(m,{name:"password",label:"Password"},{default:a(()=>[e(v,{value:t.password,"onUpdate:value":o[3]||(o[3]=u=>t.password=u),placeholder:"Enter your password"},null,8,["value"])]),_:1}),e(m,{name:"confirm",label:"Confirm Password",rules:[{validator:b}]},{default:a(()=>[e(v,{value:t.confirm,"onUpdate:value":o[4]||(o[4]=u=>t.confirm=u),placeholder:"Repeat your password"},null,8,["value"])]),_:1},8,["rules"]),e(m,null,{default:a(()=>[e(n,{type:"primary","html-type":"submit",block:"",loading:l.value},{default:a(()=>[...o[5]||(o[5]=[d(" Create Account ",-1)])]),_:1},8,["loading"])]),_:1}),e(p,null,{default:a(()=>[...o[6]||(o[6]=[d("Or sign up with",-1)])]),_:1}),e(_,{direction:"vertical",style:{width:"100%"}},{default:a(()=>[e(n,{block:"",icon:"<GoogleOutlined />"},{default:a(()=>[...o[7]||(o[7]=[d("Google",-1)])]),_:1}),e(n,{block:"",icon:"<FacebookFilled />"},{default:a(()=>[...o[8]||(o[8]=[d("Facebook",-1)])]),_:1}),e(n,{block:"",icon:"<WindowsFilled />"},{default:a(()=>[...o[9]||(o[9]=[d("Microsoft",-1)])]),_:1})]),_:1})]),_:1},8,["model"])}}};async function ae($){const c=M(),f=V();let t=null;if(typeof window<"u")try{const{useKV:i}=await B(async()=>{const{useKV:v}=await import("./CozDb8FN.js");return{useKV:v}},__vite__mapDeps([0,1,2]),import.meta.url);t=await i().get("token")}catch{t=localStorage.getItem("token")}let l=$;!l&&c.path.startsWith("/plugins/")&&(l=c.path.split("/")[2]);const g=f.public.apiBase||"http://localhost:4000",b=l?`${g}/api/${l}/graphql`:`${g}/api/graphql`,y=D({uri:b}),s=W((i,{headers:m})=>({headers:{...m,authorization:t?`Bearer ${t}`:""}})),o=new G({link:s.concat(y),cache:new K,connectToDevTools:!0});return H(o),o}const te={__name:"all_auth",setup($){ae();const c=X(),f=I("signin"),t=x`
  mutation Login($email: String!, $password: String!) {
    login(email: $email, password: $password) {
      token
      user { id email teacherProfileId }
    }
  }
`,l=x`
  mutation Register($email: String!, $password: String!, $firstName: String, $lastName: String) {
    register(email: $email, password: $password, firstName: $firstName, lastName: $lastName) {
      id
      email
    }
  }
`,{mutate:g,onDone:b,onError:y}=E(t),{mutate:s,onDone:o,onError:i}=E(l),m=n=>{g({email:n.email,password:n.password})};b(({data:n})=>{const{token:p,user:_}=n.login;c.login({token:p,user:_}),N.success(`Welcome back, ${_.email}`),F("/")}),y(n=>{N.error(n.message)});const v=n=>{if(n.password!==n.confirm)return N.error("Passwords do not match");s({email:n.email,password:n.password,firstName:n.firstName,lastName:n.lastName})};return o(({data:n})=>{N.success(`Account created for ${n.register.email}`)}),i(n=>{N.error(n.message)}),j(()=>{c.isLoggedIn.value&&F("/")}),(n,p)=>{const _=r("a-tab-pane"),k=r("a-tabs"),u=r("a-card"),w=r("a-col"),q=r("a-row");return S(),z(Q,null,[e(R),e(q,{class:"signin-section"},{default:a(()=>[e(w,{xs:24,md:14,class:"signin-content"},{default:a(()=>[e(u,{class:"signin-card",bordered:""},{default:a(()=>[e(k,{activeKey:f.value,"onUpdate:activeKey":p[0]||(p[0]=L=>f.value=L),centered:""},{default:a(()=>[e(_,{key:"signin",tab:"Sign In"},{default:a(()=>[e(J,{onSubmit:m})]),_:1}),e(_,{key:"signup",tab:"Create Account"},{default:a(()=>[e(ee,{onSubmit:v})]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1}),e(w,{xs:0,md:10,class:"signin-image"})]),_:1})],64)}}},me=U(te,[["__scopeId","data-v-ec0ff5d3"]]);export{me as default};
